#
# IETD target configuration - Generated by Chef - local changes will be overwritten
#

<%= "IncomingUser #{@incominguser[0]} #{@incominguser[1]}" if @incominguser %>
<%= "OutgoingUser #{@outgoinguser[0]} #{@outgoinguser[1]}" if @outgoinguser %>

<% @targets.each do |target| -%>
Target <%= target['iqn'] %>

	<%= "IncomingUser #{target['incominguser'][0]} #{target['incominguser'][1]}" if target['incominguser'] %>
	<%= "OutgoingUser #{target['outgoinguser'][0]} #{target['outgoinguser'][1]}" if target['outgoinguser'] %>

	<% target['luns'].each do |lun| %>
	<%= "Lun #{lun[0]} #{lun[1]}" %>
	<% end %>

	<%= "Alias #{target['alias']}" if target['alias'] %>
	<%= "MaxConnections #{target['max_connections']}" if target['max_connections'] %>
	<%= "MaxSessions #{target['max_sessions']}" if target['max_sessions'] %>

<% end -%>
